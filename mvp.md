# Andrei's NLP Project MVP

I'm working on a recipe recommender based on recipes from Food.com.   I am still working out the kinks in my scraping workflow (almost there!), so for the MVP I am using this Kaggle dataset:  https://www.kaggle.com/irkaal/foodcom-recipes-and-reviews

In order to speed up computation speed and in the interest of only recommending excellent recipes, I filtered this dataset to keep only recipes with a 5-star rating and a minimum of 10 reviews.  This left me with 22k recipes out of 280k+.

As a first pass, I word-tokenized the ingredients list of each recipe, stemmed the words, and ran them through a TF-IDF vectorizer and an NMF model with 15 topics.  This gave me the following topics, a few of which even make sense!    

```
Topic 0:
 SUGAR, FLOUR, CINNAMON, SALT, APPL, NUTMEG, VANILLA, WARM, CORNSTARCH, STRAWBERRI, VINEGAR, BLUEBERRI, ACTIV, BOIL, COLD 

Topic 1:
 ONION, CHICKEN, CELERI, CARROT, POTATO, GARLIC, WORCESTERSHIR, BEEF, TOMATO, BAY, BLACK, CHILI, DICE, CAYENN, PAPRIKA 

Topic 2:
 FRESH, EXTRA, KOSHER, UNSALT, SALT, LIME, RED, GARLIC, DIJON, SCALLION, LOW, HEAVI, FROZEN, SHALLOT, FETA 

Topic 3:
 GROUND, CHILI, BROWN, CAYENN, SALT, GARLIC, ONION, TOMATO, PAPRIKA, KETCHUP, WORCESTERSHIR, PUMPKIN, HONEY, APPL, NUTMEG 

Topic 4:
 WATER, CORNSTARCH, EGG, BREAD, SALT, SOY, ACTIV, VINEGAR, HONEY, INSTANT, BEEF, RICE, WHOLE, LONG, GINGER 

Topic 5:
 DRI, GARLIC, TOMATO, SALT, BLACK, BAY, EXTRA, BONELESS, PAPRIKA, CAYENN, CRUSH, BEEF, ALL-PURPOS, FETA, WARM 

Topic 6:
 BUTTER, MARGARIN, FLOUR, PARMESAN, SOUR, EGG, HALF-AND-HALF, PECAN, POTATO, SWISS, SALT, FROZEN, EVAPOR, POWDER, SHARP 

Topic 7:
 VANILLA, BROWN, CREAM, POWDER, PECAN, CINNAMON, CONFECTION, WALNUT, EGG, CHOCOL, LIGHT, GRANUL, SWEETEN, PEANUT, INSTANT 

Topic 8:
 GREEN, CHEDDAR, SOUR, MAYONNAIS, BACON, TOMATO, CREAM, RED, MONTEREY, SALSA, BLACK, FROZEN, CHILI, LETTUC, TORTILLA 

Topic 9:
 BAKE, EGG, ALL-PURPOS, SALT, BUTTERMILK, FLOUR, BANANA, GRANUL, SHORTEN, UNSALT, WALNUT, WHOLE, RAISIN, CANOLA, SOUR 

Topic 10:
 LEMON, MAYONNAIS, ZEST, PARSLEY, RIND, UNSALT, SALMON, HONEY, WORCESTERSHIR, DIJON, BONELESS, POWDER, CAPER, CORNSTARCH, PAPRIKA 

Topic 11:
 OLIV, GARLIC, PARMESAN, RED, BONELESS, BLACK, MOZZARELLA, TOMATO, OREGANO, PARSLEY, BASIL, SOY, ZUCCHINI, SALT, CAYENN 

Topic 12:
 MILK, EGG, FLOUR, CHEDDAR, SALT, INSTANT, BISQUICK, CHEES, POTATO, SHORTEN, SHARP, MOZZARELLA, POWDER, COOL, HAM 

Topic 13:
 WHITE, SALT, SOY, BROWN, WARM, CUCUMB, HONEY, CORNSTARCH, CAYENN, PEANUT, ALL-PURPOS, GARLIC, YELLOW, HOT, RED 

Topic 14:
 PEPPER, SALT, PAPRIKA, PARSLEY, POTATO, WORCESTERSHIR, ONION, VINEGAR, FLOUR, THYME, BACON, SWEET, LEAN, KETCHUP, CABBAG 
```



For comparison, here is the same thing but with a sentence tokenizer (using each full ingredient phrase as the token) and no stemming:

```
Topic 0:
 MILK, EGG, SALT, CHEDDAR CHEESE, BANANA, POWDERED SUGAR, COOL WHIP, POTATOES, BAKING POWDER, SHARP CHEDDAR CHEESE, PEANUT BUTTER, INSTANT VANILLA PUDDING, PLAIN FLOUR, CONFECTIONERS SUGAR, CHEESE 

Topic 1:
 OLIVE OIL, GARLIC, GARLIC CLOVES, LEMON JUICE, SALT, TOMATOES, SOY SAUCE, FRESH GROUND BLACK PEPPER, DRIED OREGANO, FRESH PARSLEY, HONEY, BLACK PEPPER, DIJON MUSTARD, KOSHER SALT, EXTRA VIRGIN OLIVE OIL 

Topic 2:
 WATER, CORNSTARCH, BREAD FLOUR, SALT, ACTIVE DRY YEAST, VINEGAR, SOY SAUCE, WHITE VINEGAR, HONEY, ONIONS, DRY YEAST, CORNMEAL, GROUND BEEF, CANOLA OIL, FRESH GINGER 

Topic 3:
 FLOUR, BAKING POWDER, SALT, BAKING SODA, EGG, SHORTENING, BUTTERMILK, CHOCOLATE CHIPS, BANANAS, WARM WATER, VANILLA, CREAM OF TARTAR, CORNMEAL, SOUR CREAM, WALNUTS 

Topic 4:
 BUTTER, POWDERED SUGAR, CONFECTIONERS SUGAR, PECANS, POTATOES, CHICKEN BROTH, HEAVY CREAM, HALF-AND-HALF, LEMON JUICE, SALT, FRESH PARSLEY, ONIONS, ICING SUGAR, PARSLEY, SWISS CHEESE 

Topic 5:
 ALL-PURPOSE FLOUR, BAKING POWDER, BAKING SODA, SALT, VANILLA EXTRACT, EGG, GRANULATED SUGAR, UNSALTED BUTTER, BUTTERMILK, GROUND CINNAMON, WHITE SUGAR, BANANAS, WHOLE WHEAT FLOUR, SHORTENING, LIGHT BROWN SUGAR 

Topic 6:
 SUGAR, VANILLA, SALT, LEMON JUICE, CREAM CHEESE, CORNSTARCH, VANILLA EXTRACT, BLUEBERRIES, WARM WATER, BOILING WATER, GROUND CINNAMON, VINEGAR, FRESH STRAWBERRIES, STRAWBERRIES, COLD WATER 

Topic 7:
 EGGS, VANILLA, POWDERED SUGAR, PECANS, CREAM CHEESE, WALNUTS, BAKING SODA, CHOCOLATE CHIPS, CONFECTIONERS SUGAR, BANANAS, BAKING POWDER, SWEETENED CONDENSED MILK, SALT, VANILLA EXTRACT, EVAPORATED MILK 

Topic 8:
 ONION, PEPPER, SALT, CELERY, POTATOES, GROUND BEEF, CHICKEN BROTH, WORCESTERSHIRE SAUCE, CARROTS, CARROT, TOMATO SAUCE, GREEN PEPPER, PARSLEY, GARLIC CLOVE, KETCHUP 

Topic 9:
 BROWN SUGAR, VANILLA, BAKING SODA, SOY SAUCE, PECANS, WHITE SUGAR, CHOCOLATE CHIPS, KETCHUP, PEANUT BUTTER, WORCESTERSHIRE SAUCE, ROLLED OATS, WALNUTS, GROUND CINNAMON, GROUND GINGER, VINEGAR 

Topic 10:
 PARMESAN CHEESE, MOZZARELLA CHEESE, EGG, RICOTTA CHEESE, ZUCCHINI, BONELESS SKINLESS CHICKEN BREASTS, DRIED BASIL, GARLIC, OREGANO, FRESH PARSLEY, PARSLEY, FROZEN CHOPPED SPINACH, ROMANO CHEESE, FRESH BASIL, GROUND BEEF 

Topic 11:
 GARLIC POWDER, PAPRIKA, BLACK PEPPER, ONION POWDER, CAYENNE PEPPER, CHILI POWDER, SALT, SEASONING SALT, WORCESTERSHIRE SAUCE, CUMIN, GROUND CUMIN, GROUND BLACK PEPPER, DRIED OREGANO, DRIED THYME, MAYONNAISE 

Topic 12:
 MARGARINE, POWDERED SUGAR, VANILLA, PEANUT BUTTER, CHOCOLATE CHIPS, SWEETENED CONDENSED MILK, CREAM CHEESE, MARSHMALLOWS, HONEY, CREAMY PEANUT BUTTER, EVAPORATED MILK, QUICK OATS, BONELESS SKINLESS CHICKEN BREAST HALVES, COOL WHIP, CHERRY PIE FILLING 

Topic 13:
 CINNAMON, NUTMEG, APPLES, RAISINS, WALNUTS, HONEY, ALLSPICE, GINGER, CLOVE, BAKING SODA, GROUND CLOVES, PUMPKIN, APPLESAUCE, APPLE, ZUCCHINI 

Topic 14:
 SOUR CREAM, CHEDDAR CHEESE, CREAM CHEESE, MAYONNAISE, BACON, GREEN ONION, GREEN ONIONS, SALSA, MONTEREY JACK CHEESE, FLOUR TORTILLAS, TOMATOES, LETTUCE, GREEN CHILIES, BLACK OLIVES, TORTILLA CHIPS 
```



These topics are somewhat more cohesive, but the problem is that it will be difficult to get good recommendations when the user inputs his or her own list of ingredients (for example, if the user writes "tortillas", this will not register with any recipe that says "corn tortilla" or "flour tortilla" (or the plurals thereof).  

How would you suggest making this recommender satisfy the twin goals of (a) building cohesive topics from the existing recipe corpus, and (b) being flexible in understanding user-inputted ingredients, which will invariably be more terse than the words in the existing recipe corpus?

One idea I had was to generate two types of tokens:  1-grams where the part of speech is a noun, and 2-grams where the second word is a noun.  This way I could get both "tortillas" and "flour tortillas" without introducing too many extra tokens.  Many common ingredients have this form. 
